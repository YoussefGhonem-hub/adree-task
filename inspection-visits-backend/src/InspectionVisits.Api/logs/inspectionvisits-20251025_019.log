2025-10-25 21:34:18.751 +03:00 [INF] User profile is available. Using 'C:\Users\Youssef Ghonem\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-25 21:34:20.484 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-25 21:34:20.611 +03:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-25 21:34:20.631 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-25 21:34:20.645 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-25 21:34:20.689 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-25 21:34:20.729 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-25 21:34:21.142 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[@__role_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetRoles] AS [a]
        WHERE [a].[Name] = @__role_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-25 21:34:21.166 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__role_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetRoles] AS [a]
        WHERE [a].[Name] = @__role_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-25 21:34:21.259 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__adminEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Email] = @__adminEmail_0
2025-10-25 21:34:21.411 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@__inspEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Email] = @__inspEmail_0
2025-10-25 21:34:21.441 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Inspectors] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-25 21:34:21.461 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [EntitiesToInspect] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-25 21:34:21.518 +03:00 [INF] Database seeded.
2025-10-25 21:34:21.932 +03:00 [INF] Now listening on: https://localhost:63886
2025-10-25 21:34:21.942 +03:00 [INF] Now listening on: http://localhost:63887
2025-10-25 21:34:22.035 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-25 21:34:22.038 +03:00 [INF] Hosting environment: Development
2025-10-25 21:34:22.049 +03:00 [INF] Content root path: C:\Users\Youssef Ghonem\Downloads\adreeTask\inspection-visits-backend\src\InspectionVisits.Api
2025-10-25 21:34:22.387 +03:00 [INF] Request starting HTTP/2 GET https://localhost:63886/ - null null
2025-10-25 21:34:22.624 +03:00 [INF] HTTP GET / responded 404 in 51.8009 ms
2025-10-25 21:34:22.638 +03:00 [INF] Request finished HTTP/2 GET https://localhost:63886/ - 404 0 null 258.8863ms
2025-10-25 21:34:22.653 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:63886/, Response status code: 404
2025-10-25 21:34:24.750 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - null null
2025-10-25 21:34:24.750 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/inspectors - null null
2025-10-25 21:34:24.750 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/entities - null null
2025-10-25 21:34:24.785 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:34:24.790 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:34:24.795 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:34:24.803 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/inspectors - 204 null null 52.9754ms
2025-10-25 21:34:24.803 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/entities - 204 null null 53.3118ms
2025-10-25 21:34:24.808 +03:00 [INF] Request starting HTTP/2 GET https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - null null
2025-10-25 21:34:24.803 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - 204 null null 52.9713ms
2025-10-25 21:34:24.809 +03:00 [INF] Request starting HTTP/2 GET https://localhost:63886/api/entities - null null
2025-10-25 21:34:24.808 +03:00 [INF] Request starting HTTP/2 GET https://localhost:63886/api/inspectors - null null
2025-10-25 21:34:24.865 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:34:24.875 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:34:24.881 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:34:24.981 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.EntitiesController.List (InspectionVisits.Api)'
2025-10-25 21:34:24.981 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.InspectorsController.GetAll (InspectionVisits.Api)'
2025-10-25 21:34:24.982 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.VisitsController.List (InspectionVisits.Api)'
2025-10-25 21:34:25.020 +03:00 [INF] Route matched with {action = "List", controller = "Entities"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.List`1[InspectionVisits.Application.DTOs.EntityToInspectDto]] List(System.String) on controller InspectionVisits.Api.Controllers.EntitiesController (InspectionVisits.Api).
2025-10-25 21:34:25.020 +03:00 [INF] Route matched with {action = "List", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.List`1[InspectionVisits.Application.DTOs.InspectionVisitDto]] List(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[InspectionVisits.Domain.Enums.VisitStatus], System.Nullable`1[System.Int32], System.String) on controller InspectionVisits.Api.Controllers.VisitsController (InspectionVisits.Api).
2025-10-25 21:34:25.020 +03:00 [INF] Route matched with {action = "GetAll", controller = "Inspectors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IReadOnlyList`1[InspectionVisits.Application.DTOs.InspectorDto]]] GetAll(System.Threading.CancellationToken) on controller InspectionVisits.Api.Controllers.InspectorsController (InspectionVisits.Api).
2025-10-25 21:34:25.317 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Name], [e].[Address], [e].[Category]
FROM [EntitiesToInspect] AS [e]
2025-10-25 21:34:25.356 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[FullName], [i].[Email], [i].[Phone], [i].[Role]
FROM [Inspectors] AS [i]
ORDER BY [i].[FullName]
2025-10-25 21:34:25.364 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[InspectionVisits.Application.DTOs.EntityToInspectDto, InspectionVisits.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-25 21:34:25.376 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[InspectionVisits.Application.DTOs.InspectorDto, InspectionVisits.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-25 21:34:25.393 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.InspectorsController.GetAll (InspectionVisits.Api) in 328.1343ms
2025-10-25 21:34:25.393 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.EntitiesController.List (InspectionVisits.Api) in 345.0959ms
2025-10-25 21:34:25.403 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.InspectorsController.GetAll (InspectionVisits.Api)'
2025-10-25 21:34:25.405 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.EntitiesController.List (InspectionVisits.Api)'
2025-10-25 21:34:25.414 +03:00 [INF] HTTP GET /api/inspectors responded 200 in 521.4750 ms
2025-10-25 21:34:25.416 +03:00 [INF] HTTP GET /api/entities responded 200 in 525.2908 ms
2025-10-25 21:34:25.433 +03:00 [INF] Request finished HTTP/2 GET https://localhost:63886/api/inspectors - 200 null application/json; charset=utf-8 625.2824ms
2025-10-25 21:34:25.433 +03:00 [INF] Request finished HTTP/2 GET https://localhost:63886/api/entities - 200 null application/json; charset=utf-8 624.088ms
2025-10-25 21:34:25.461 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[EntityToInspectId], [i].[InspectorId], [i].[ScheduledAt], [i].[Status], [i].[Score], [i].[Notes], [v].[Id], [v].[Code], [v].[Description], [v].[Severity]
FROM [InspectionVisits] AS [i]
LEFT JOIN [Violations] AS [v] ON [i].[Id] = [v].[InspectionVisitId]
ORDER BY [i].[Id]
2025-10-25 21:34:25.477 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[InspectionVisits.Application.DTOs.InspectionVisitDto, InspectionVisits.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-25 21:34:25.502 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.VisitsController.List (InspectionVisits.Api) in 452.6742ms
2025-10-25 21:34:25.512 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.VisitsController.List (InspectionVisits.Api)'
2025-10-25 21:34:25.520 +03:00 [INF] HTTP GET /api/visits responded 200 in 630.6497 ms
2025-10-25 21:34:25.533 +03:00 [INF] Request finished HTTP/2 GET https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - 200 null application/json; charset=utf-8 724.8692ms
2025-10-25 21:34:37.481 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/visits/schedule - null null
2025-10-25 21:34:37.492 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:34:37.494 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/visits/schedule - 204 null null 14.1565ms
2025-10-25 21:34:37.497 +03:00 [INF] Request starting HTTP/2 POST https://localhost:63886/api/visits/schedule - application/json 80
2025-10-25 21:34:37.514 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:34:37.520 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.VisitsController.Schedule (InspectionVisits.Api)'
2025-10-25 21:34:37.529 +03:00 [INF] Route matched with {action = "Schedule", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[InspectionVisits.Application.DTOs.InspectionVisitDto] Schedule(ScheduleVisitBody) on controller InspectionVisits.Api.Controllers.VisitsController (InspectionVisits.Api).
2025-10-25 21:34:37.785 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.VisitsController.Schedule (InspectionVisits.Api) in 248.0573ms
2025-10-25 21:34:37.794 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.VisitsController.Schedule (InspectionVisits.Api)'
2025-10-25 21:34:37.801 +03:00 [ERR] HTTP POST /api/visits/schedule responded 500 in 283.2173 ms
FluentValidation.ValidationException: Validation failed: 
 -- ScheduledAt: 'Scheduled At' must be greater than '10/25/2025 6:33:37 PM'. Severity: Error
   at InspectionVisits.Application.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Youssef Ghonem\Downloads\adreeTask\inspection-visits-backend\src\InspectionVisits.Application\Common\Behaviors\ValidationBehavior.cs:line 21
   at lambda_method236(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-10-25 21:34:37.879 +03:00 [ERR] An unhandled exception has occurred while executing the request.
FluentValidation.ValidationException: Validation failed: 
 -- ScheduledAt: 'Scheduled At' must be greater than '10/25/2025 6:33:37 PM'. Severity: Error
   at InspectionVisits.Application.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Youssef Ghonem\Downloads\adreeTask\inspection-visits-backend\src\InspectionVisits.Application\Common\Behaviors\ValidationBehavior.cs:line 21
   at lambda_method236(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-25 21:34:37.926 +03:00 [INF] Executing endpoint '/error'
2025-10-25 21:34:37.970 +03:00 [INF] Setting HTTP status code 400.
2025-10-25 21:34:38.017 +03:00 [INF] Executed endpoint '/error'
2025-10-25 21:34:38.023 +03:00 [INF] HTTP POST /error responded 400 in 96.8814 ms
2025-10-25 21:34:38.032 +03:00 [INF] Request finished HTTP/2 POST https://localhost:63886/api/visits/schedule - 400 null application/problem+json 535.02ms
2025-10-25 21:34:41.191 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/entities - null null
2025-10-25 21:34:41.191 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/inspectors - null null
2025-10-25 21:34:41.197 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - null null
2025-10-25 21:34:41.213 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:34:41.218 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:34:41.223 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:34:41.231 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/entities - 204 null null 39.8701ms
2025-10-25 21:34:41.236 +03:00 [INF] Request starting HTTP/2 GET https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - null null
2025-10-25 21:34:41.233 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - 204 null null 36.8181ms
2025-10-25 21:34:41.234 +03:00 [INF] Request starting HTTP/2 GET https://localhost:63886/api/entities - null null
2025-10-25 21:34:41.235 +03:00 [INF] Request starting HTTP/2 GET https://localhost:63886/api/inspectors - null null
2025-10-25 21:34:41.232 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/inspectors - 204 null null 41.0016ms
2025-10-25 21:34:41.283 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:34:41.293 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:34:41.297 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:34:41.309 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.VisitsController.List (InspectionVisits.Api)'
2025-10-25 21:34:41.310 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.EntitiesController.List (InspectionVisits.Api)'
2025-10-25 21:34:41.311 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.InspectorsController.GetAll (InspectionVisits.Api)'
2025-10-25 21:34:41.324 +03:00 [INF] Route matched with {action = "GetAll", controller = "Inspectors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IReadOnlyList`1[InspectionVisits.Application.DTOs.InspectorDto]]] GetAll(System.Threading.CancellationToken) on controller InspectionVisits.Api.Controllers.InspectorsController (InspectionVisits.Api).
2025-10-25 21:34:41.321 +03:00 [INF] Route matched with {action = "List", controller = "Entities"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.List`1[InspectionVisits.Application.DTOs.EntityToInspectDto]] List(System.String) on controller InspectionVisits.Api.Controllers.EntitiesController (InspectionVisits.Api).
2025-10-25 21:34:41.319 +03:00 [INF] Route matched with {action = "List", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.List`1[InspectionVisits.Application.DTOs.InspectionVisitDto]] List(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[InspectionVisits.Domain.Enums.VisitStatus], System.Nullable`1[System.Int32], System.String) on controller InspectionVisits.Api.Controllers.VisitsController (InspectionVisits.Api).
2025-10-25 21:34:41.443 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Name], [e].[Address], [e].[Category]
FROM [EntitiesToInspect] AS [e]
2025-10-25 21:34:41.443 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[FullName], [i].[Email], [i].[Phone], [i].[Role]
FROM [Inspectors] AS [i]
ORDER BY [i].[FullName]
2025-10-25 21:34:41.462 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[EntityToInspectId], [i].[InspectorId], [i].[ScheduledAt], [i].[Status], [i].[Score], [i].[Notes], [v].[Id], [v].[Code], [v].[Description], [v].[Severity]
FROM [InspectionVisits] AS [i]
LEFT JOIN [Violations] AS [v] ON [i].[Id] = [v].[InspectionVisitId]
ORDER BY [i].[Id]
2025-10-25 21:34:41.464 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[InspectionVisits.Application.DTOs.EntityToInspectDto, InspectionVisits.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-25 21:34:41.470 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[InspectionVisits.Application.DTOs.InspectorDto, InspectionVisits.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-25 21:34:41.488 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[InspectionVisits.Application.DTOs.InspectionVisitDto, InspectionVisits.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-25 21:34:41.492 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.EntitiesController.List (InspectionVisits.Api) in 146.732ms
2025-10-25 21:34:41.495 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.InspectorsController.GetAll (InspectionVisits.Api) in 153.6088ms
2025-10-25 21:34:41.505 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.VisitsController.List (InspectionVisits.Api) in 156.606ms
2025-10-25 21:34:41.508 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.EntitiesController.List (InspectionVisits.Api)'
2025-10-25 21:34:41.511 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.InspectorsController.GetAll (InspectionVisits.Api)'
2025-10-25 21:34:41.520 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.VisitsController.List (InspectionVisits.Api)'
2025-10-25 21:34:41.522 +03:00 [INF] HTTP GET /api/entities responded 200 in 212.8400 ms
2025-10-25 21:34:41.525 +03:00 [INF] HTTP GET /api/inspectors responded 200 in 214.3512 ms
2025-10-25 21:34:41.534 +03:00 [INF] HTTP GET /api/visits responded 200 in 225.8329 ms
2025-10-25 21:34:41.538 +03:00 [INF] Request finished HTTP/2 GET https://localhost:63886/api/entities - 200 null application/json; charset=utf-8 304.2398ms
2025-10-25 21:34:41.541 +03:00 [INF] Request finished HTTP/2 GET https://localhost:63886/api/inspectors - 200 null application/json; charset=utf-8 306.1529ms
2025-10-25 21:34:41.556 +03:00 [INF] Request finished HTTP/2 GET https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - 200 null application/json; charset=utf-8 320.9713ms
2025-10-25 21:35:06.779 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/visits/schedule - null null
2025-10-25 21:35:06.804 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:35:06.806 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/visits/schedule - 204 null null 27.7382ms
2025-10-25 21:35:06.809 +03:00 [INF] Request starting HTTP/2 POST https://localhost:63886/api/visits/schedule - application/json 80
2025-10-25 21:35:06.823 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:35:06.827 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.VisitsController.Schedule (InspectionVisits.Api)'
2025-10-25 21:35:06.830 +03:00 [INF] Route matched with {action = "Schedule", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[InspectionVisits.Application.DTOs.InspectionVisitDto] Schedule(ScheduleVisitBody) on controller InspectionVisits.Api.Controllers.VisitsController (InspectionVisits.Api).
2025-10-25 21:35:06.889 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.VisitsController.Schedule (InspectionVisits.Api) in 52.2612ms
2025-10-25 21:35:06.896 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.VisitsController.Schedule (InspectionVisits.Api)'
2025-10-25 21:35:06.900 +03:00 [ERR] HTTP POST /api/visits/schedule responded 500 in 74.3824 ms
FluentValidation.ValidationException: Validation failed: 
 -- ScheduledAt: 'Scheduled At' must be greater than '10/25/2025 6:34:06 PM'. Severity: Error
   at InspectionVisits.Application.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Youssef Ghonem\Downloads\adreeTask\inspection-visits-backend\src\InspectionVisits.Application\Common\Behaviors\ValidationBehavior.cs:line 21
   at lambda_method236(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-10-25 21:35:06.923 +03:00 [ERR] An unhandled exception has occurred while executing the request.
FluentValidation.ValidationException: Validation failed: 
 -- ScheduledAt: 'Scheduled At' must be greater than '10/25/2025 6:34:06 PM'. Severity: Error
   at InspectionVisits.Application.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Youssef Ghonem\Downloads\adreeTask\inspection-visits-backend\src\InspectionVisits.Application\Common\Behaviors\ValidationBehavior.cs:line 21
   at lambda_method236(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-25 21:35:06.937 +03:00 [INF] Executing endpoint '/error'
2025-10-25 21:35:06.947 +03:00 [INF] Setting HTTP status code 400.
2025-10-25 21:35:06.956 +03:00 [INF] Executed endpoint '/error'
2025-10-25 21:35:06.966 +03:00 [INF] HTTP POST /error responded 400 in 28.6384 ms
2025-10-25 21:35:06.985 +03:00 [INF] Request finished HTTP/2 POST https://localhost:63886/api/visits/schedule - 400 null application/problem+json 176.7043ms
2025-10-25 21:37:28.493 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/visits/schedule - null null
2025-10-25 21:37:28.540 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:37:28.545 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/visits/schedule - 204 null null 52.295ms
2025-10-25 21:37:28.548 +03:00 [INF] Request starting HTTP/2 POST https://localhost:63886/api/visits/schedule - application/json 80
2025-10-25 21:37:28.567 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:37:28.571 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.VisitsController.Schedule (InspectionVisits.Api)'
2025-10-25 21:37:28.574 +03:00 [INF] Route matched with {action = "Schedule", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[InspectionVisits.Application.DTOs.InspectionVisitDto] Schedule(ScheduleVisitBody) on controller InspectionVisits.Api.Controllers.VisitsController (InspectionVisits.Api).
2025-10-25 21:37:28.632 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.VisitsController.Schedule (InspectionVisits.Api) in 49.6824ms
2025-10-25 21:37:28.640 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.VisitsController.Schedule (InspectionVisits.Api)'
2025-10-25 21:37:28.646 +03:00 [ERR] HTTP POST /api/visits/schedule responded 500 in 75.7908 ms
FluentValidation.ValidationException: Validation failed: 
 -- ScheduledAt: 'Scheduled At' must be greater than '10/25/2025 6:36:28 PM'. Severity: Error
   at InspectionVisits.Application.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Youssef Ghonem\Downloads\adreeTask\inspection-visits-backend\src\InspectionVisits.Application\Common\Behaviors\ValidationBehavior.cs:line 21
   at lambda_method236(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-10-25 21:37:28.672 +03:00 [ERR] An unhandled exception has occurred while executing the request.
FluentValidation.ValidationException: Validation failed: 
 -- ScheduledAt: 'Scheduled At' must be greater than '10/25/2025 6:36:28 PM'. Severity: Error
   at InspectionVisits.Application.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Youssef Ghonem\Downloads\adreeTask\inspection-visits-backend\src\InspectionVisits.Application\Common\Behaviors\ValidationBehavior.cs:line 21
   at lambda_method236(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-25 21:37:28.696 +03:00 [INF] Executing endpoint '/error'
2025-10-25 21:37:28.701 +03:00 [INF] Setting HTTP status code 400.
2025-10-25 21:37:28.707 +03:00 [INF] Executed endpoint '/error'
2025-10-25 21:37:28.712 +03:00 [INF] HTTP POST /error responded 400 in 16.0471 ms
2025-10-25 21:37:28.727 +03:00 [INF] Request finished HTTP/2 POST https://localhost:63886/api/visits/schedule - 400 null application/problem+json 179.0356ms
2025-10-25 21:37:47.429 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/visits/schedule - null null
2025-10-25 21:37:47.453 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:37:47.456 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/visits/schedule - 204 null null 27.7184ms
2025-10-25 21:37:47.460 +03:00 [INF] Request starting HTTP/2 POST https://localhost:63886/api/visits/schedule - application/json 80
2025-10-25 21:37:47.524 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:37:47.528 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.VisitsController.Schedule (InspectionVisits.Api)'
2025-10-25 21:37:47.533 +03:00 [INF] Route matched with {action = "Schedule", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[InspectionVisits.Application.DTOs.InspectionVisitDto] Schedule(ScheduleVisitBody) on controller InspectionVisits.Api.Controllers.VisitsController (InspectionVisits.Api).
2025-10-25 21:37:54.188 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__req_EntityToInspectId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [EntitiesToInspect] AS [e]
        WHERE [e].[Id] = @__req_EntityToInspectId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-25 21:37:54.226 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@__req_InspectorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Inspectors] AS [i]
        WHERE [i].[Id] = @__req_InspectorId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-25 21:37:54.516 +03:00 [INF] Executed DbCommand (103ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 2000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InspectionVisits] ([CreatedAt], [EntityToInspectId], [InspectorId], [Notes], [ScheduledAt], [Score], [Status], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-10-25 21:37:54.595 +03:00 [INF] Executing ObjectResult, writing value of type 'InspectionVisits.Application.DTOs.InspectionVisitDto'.
2025-10-25 21:37:54.604 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.VisitsController.Schedule (InspectionVisits.Api) in 7061.4859ms
2025-10-25 21:37:54.610 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.VisitsController.Schedule (InspectionVisits.Api)'
2025-10-25 21:37:54.617 +03:00 [INF] HTTP POST /api/visits/schedule responded 200 in 7089.3982 ms
2025-10-25 21:37:54.627 +03:00 [INF] Request finished HTTP/2 POST https://localhost:63886/api/visits/schedule - 200 null application/json; charset=utf-8 7167.0311ms
2025-10-25 21:37:54.637 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - null null
2025-10-25 21:37:54.655 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:37:54.659 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - 204 null null 22.512ms
2025-10-25 21:37:54.662 +03:00 [INF] Request starting HTTP/2 GET https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - null null
2025-10-25 21:37:54.686 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:37:54.690 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.VisitsController.List (InspectionVisits.Api)'
2025-10-25 21:37:54.696 +03:00 [INF] Route matched with {action = "List", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.List`1[InspectionVisits.Application.DTOs.InspectionVisitDto]] List(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[InspectionVisits.Domain.Enums.VisitStatus], System.Nullable`1[System.Int32], System.String) on controller InspectionVisits.Api.Controllers.VisitsController (InspectionVisits.Api).
2025-10-25 21:37:54.724 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[EntityToInspectId], [i].[InspectorId], [i].[ScheduledAt], [i].[Status], [i].[Score], [i].[Notes], [v].[Id], [v].[Code], [v].[Description], [v].[Severity]
FROM [InspectionVisits] AS [i]
LEFT JOIN [Violations] AS [v] ON [i].[Id] = [v].[InspectionVisitId]
ORDER BY [i].[Id]
2025-10-25 21:37:54.738 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[InspectionVisits.Application.DTOs.InspectionVisitDto, InspectionVisits.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-25 21:37:54.744 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.VisitsController.List (InspectionVisits.Api) in 37.5127ms
2025-10-25 21:37:54.751 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.VisitsController.List (InspectionVisits.Api)'
2025-10-25 21:37:54.754 +03:00 [INF] HTTP GET /api/visits responded 200 in 64.1187 ms
2025-10-25 21:37:54.763 +03:00 [INF] Request finished HTTP/2 GET https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - 200 null application/json; charset=utf-8 100.8472ms
2025-10-25 21:38:12.131 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/visits/1/status - null null
2025-10-25 21:38:12.148 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:38:12.153 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/visits/1/status - 204 null null 22.2975ms
2025-10-25 21:38:12.155 +03:00 [INF] Request starting HTTP/2 POST https://localhost:63886/api/visits/1/status - application/json 52
2025-10-25 21:38:12.177 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:38:12.184 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Inspector)
2025-10-25 21:38:12.195 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-25 21:38:12.200 +03:00 [INF] HTTP POST /api/visits/1/status responded 403 in 17.7409 ms
2025-10-25 21:38:12.207 +03:00 [INF] Request finished HTTP/2 POST https://localhost:63886/api/visits/1/status - 403 0 null 52.3438ms
2025-10-25 21:38:14.164 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/auth/login - null null
2025-10-25 21:38:14.175 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:38:14.179 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/auth/login - 204 null null 15.2392ms
2025-10-25 21:38:14.184 +03:00 [INF] Request starting HTTP/2 POST https://localhost:63886/api/auth/login - application/json 51
2025-10-25 21:38:14.208 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:38:14.211 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.AuthController.Login (InspectionVisits.Api)'
2025-10-25 21:38:14.222 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller InspectionVisits.Api.Controllers.AuthController (InspectionVisits.Api).
2025-10-25 21:38:14.278 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-25 21:38:14.479 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-10-25 21:38:14.513 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IList`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-25 21:38:14.527 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.AuthController.Login (InspectionVisits.Api) in 294.4832ms
2025-10-25 21:38:14.541 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.AuthController.Login (InspectionVisits.Api)'
2025-10-25 21:38:14.546 +03:00 [INF] HTTP POST /api/auth/login responded 200 in 335.4134 ms
2025-10-25 21:38:14.554 +03:00 [INF] Request finished HTTP/2 POST https://localhost:63886/api/auth/login - 200 null application/json; charset=utf-8 370.1948ms
2025-10-25 21:38:14.586 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/dashboard - null null
2025-10-25 21:38:14.594 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:38:14.597 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/dashboard - 204 null null 11.9533ms
2025-10-25 21:38:14.601 +03:00 [INF] Request starting HTTP/2 GET https://localhost:63886/api/dashboard - null null
2025-10-25 21:38:14.617 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:38:14.621 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.DashboardController.Get (InspectionVisits.Api)'
2025-10-25 21:38:14.631 +03:00 [INF] Route matched with {action = "Get", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[InspectionVisits.Application.Features.Dashboard.Queries.DashboardVm] Get() on controller InspectionVisits.Api.Controllers.DashboardController (InspectionVisits.Api).
2025-10-25 21:38:14.774 +03:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Status], COUNT(*)
FROM [InspectionVisits] AS [i]
GROUP BY [i].[Status]
2025-10-25 21:38:14.834 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@__monthStart_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT AVG(CAST([i].[Score] AS float))
FROM [InspectionVisits] AS [i]
WHERE [i].[ScheduledAt] >= @__monthStart_0 AND [i].[Score] IS NOT NULL
2025-10-25 21:38:14.849 +03:00 [INF] Executing ObjectResult, writing value of type 'InspectionVisits.Application.Features.Dashboard.Queries.DashboardVm'.
2025-10-25 21:38:14.872 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.DashboardController.Get (InspectionVisits.Api) in 232.3974ms
2025-10-25 21:38:14.880 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.DashboardController.Get (InspectionVisits.Api)'
2025-10-25 21:38:14.886 +03:00 [INF] HTTP GET /api/dashboard responded 200 in 264.7602 ms
2025-10-25 21:38:14.895 +03:00 [INF] Request finished HTTP/2 GET https://localhost:63886/api/dashboard - 200 null application/json; charset=utf-8 293.5573ms
2025-10-25 21:38:19.727 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/entities - null null
2025-10-25 21:38:19.737 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:38:19.740 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/entities - 204 null null 14.024ms
2025-10-25 21:38:19.743 +03:00 [INF] Request starting HTTP/2 GET https://localhost:63886/api/entities - null null
2025-10-25 21:38:19.766 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:38:19.769 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.EntitiesController.List (InspectionVisits.Api)'
2025-10-25 21:38:19.775 +03:00 [INF] Route matched with {action = "List", controller = "Entities"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.List`1[InspectionVisits.Application.DTOs.EntityToInspectDto]] List(System.String) on controller InspectionVisits.Api.Controllers.EntitiesController (InspectionVisits.Api).
2025-10-25 21:38:19.795 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Name], [e].[Address], [e].[Category]
FROM [EntitiesToInspect] AS [e]
2025-10-25 21:38:19.806 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[InspectionVisits.Application.DTOs.EntityToInspectDto, InspectionVisits.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-25 21:38:19.812 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.EntitiesController.List (InspectionVisits.Api) in 29.2021ms
2025-10-25 21:38:19.818 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.EntitiesController.List (InspectionVisits.Api)'
2025-10-25 21:38:19.821 +03:00 [INF] HTTP GET /api/entities responded 200 in 52.9914 ms
2025-10-25 21:38:19.830 +03:00 [INF] Request finished HTTP/2 GET https://localhost:63886/api/entities - 200 null application/json; charset=utf-8 87.542ms
2025-10-25 21:38:21.781 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/entities - null null
2025-10-25 21:38:21.781 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/inspectors - null null
2025-10-25 21:38:21.782 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - null null
2025-10-25 21:38:21.809 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:38:21.815 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:38:21.819 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:38:21.826 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/entities - 204 null null 45.4629ms
2025-10-25 21:38:21.829 +03:00 [INF] Request starting HTTP/2 GET https://localhost:63886/api/inspectors - null null
2025-10-25 21:38:21.827 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/inspectors - 204 null null 45.8205ms
2025-10-25 21:38:21.828 +03:00 [INF] Request starting HTTP/2 GET https://localhost:63886/api/entities - null null
2025-10-25 21:38:21.828 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - 204 null null 45.4641ms
2025-10-25 21:38:21.836 +03:00 [INF] Request starting HTTP/2 GET https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - null null
2025-10-25 21:38:21.884 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:38:21.891 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:38:21.900 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:38:21.903 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.InspectorsController.GetAll (InspectionVisits.Api)'
2025-10-25 21:38:21.913 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.EntitiesController.List (InspectionVisits.Api)'
2025-10-25 21:38:21.916 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.VisitsController.List (InspectionVisits.Api)'
2025-10-25 21:38:21.922 +03:00 [INF] Route matched with {action = "GetAll", controller = "Inspectors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IReadOnlyList`1[InspectionVisits.Application.DTOs.InspectorDto]]] GetAll(System.Threading.CancellationToken) on controller InspectionVisits.Api.Controllers.InspectorsController (InspectionVisits.Api).
2025-10-25 21:38:21.923 +03:00 [INF] Route matched with {action = "List", controller = "Entities"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.List`1[InspectionVisits.Application.DTOs.EntityToInspectDto]] List(System.String) on controller InspectionVisits.Api.Controllers.EntitiesController (InspectionVisits.Api).
2025-10-25 21:38:21.925 +03:00 [INF] Route matched with {action = "List", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.List`1[InspectionVisits.Application.DTOs.InspectionVisitDto]] List(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[InspectionVisits.Domain.Enums.VisitStatus], System.Nullable`1[System.Int32], System.String) on controller InspectionVisits.Api.Controllers.VisitsController (InspectionVisits.Api).
2025-10-25 21:38:21.947 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Name], [e].[Address], [e].[Category]
FROM [EntitiesToInspect] AS [e]
2025-10-25 21:38:21.945 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[FullName], [i].[Email], [i].[Phone], [i].[Role]
FROM [Inspectors] AS [i]
ORDER BY [i].[FullName]
2025-10-25 21:38:21.960 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[EntityToInspectId], [i].[InspectorId], [i].[ScheduledAt], [i].[Status], [i].[Score], [i].[Notes], [v].[Id], [v].[Code], [v].[Description], [v].[Severity]
FROM [InspectionVisits] AS [i]
LEFT JOIN [Violations] AS [v] ON [i].[Id] = [v].[InspectionVisitId]
ORDER BY [i].[Id]
2025-10-25 21:38:21.968 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[InspectionVisits.Application.DTOs.EntityToInspectDto, InspectionVisits.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-25 21:38:21.971 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[InspectionVisits.Application.DTOs.InspectorDto, InspectionVisits.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-25 21:38:21.975 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[InspectionVisits.Application.DTOs.InspectionVisitDto, InspectionVisits.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-25 21:38:21.985 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.EntitiesController.List (InspectionVisits.Api) in 43.6768ms
2025-10-25 21:38:21.988 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.InspectorsController.GetAll (InspectionVisits.Api) in 49.2632ms
2025-10-25 21:38:21.991 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.VisitsController.List (InspectionVisits.Api) in 42.4729ms
2025-10-25 21:38:22.001 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.EntitiesController.List (InspectionVisits.Api)'
2025-10-25 21:38:22.003 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.InspectorsController.GetAll (InspectionVisits.Api)'
2025-10-25 21:38:22.006 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.VisitsController.List (InspectionVisits.Api)'
2025-10-25 21:38:22.016 +03:00 [INF] HTTP GET /api/entities responded 200 in 103.6603 ms
2025-10-25 21:38:22.019 +03:00 [INF] HTTP GET /api/inspectors responded 200 in 116.1797 ms
2025-10-25 21:38:22.022 +03:00 [INF] HTTP GET /api/visits responded 200 in 106.4930 ms
2025-10-25 21:38:22.037 +03:00 [INF] Request finished HTTP/2 GET https://localhost:63886/api/entities - 200 null application/json; charset=utf-8 208.9784ms
2025-10-25 21:38:22.040 +03:00 [INF] Request finished HTTP/2 GET https://localhost:63886/api/inspectors - 200 null application/json; charset=utf-8 210.5313ms
2025-10-25 21:38:22.043 +03:00 [INF] Request finished HTTP/2 GET https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - 200 null application/json; charset=utf-8 207.0531ms
2025-10-25 21:38:30.058 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/visits/1/violations - null null
2025-10-25 21:38:30.070 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:38:30.072 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/visits/1/violations - 204 null null 14.0237ms
2025-10-25 21:38:30.076 +03:00 [INF] Request starting HTTP/2 POST https://localhost:63886/api/visits/1/violations - application/json 48
2025-10-25 21:38:30.092 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:38:30.094 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Inspector)
2025-10-25 21:38:30.098 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-10-25 21:38:30.100 +03:00 [INF] HTTP POST /api/visits/1/violations responded 403 in 6.8819 ms
2025-10-25 21:38:30.108 +03:00 [INF] Request finished HTTP/2 POST https://localhost:63886/api/visits/1/violations - 403 0 null 32.673ms
2025-10-25 21:39:33.964 +03:00 [INF] User profile is available. Using 'C:\Users\Youssef Ghonem\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-25 21:39:35.804 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-25 21:39:35.894 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-25 21:39:35.911 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-10-25 21:39:35.925 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-10-25 21:39:35.968 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-10-25 21:39:36.005 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-10-25 21:39:36.397 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@__role_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetRoles] AS [a]
        WHERE [a].[Name] = @__role_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-25 21:39:36.423 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__role_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [AspNetRoles] AS [a]
        WHERE [a].[Name] = @__role_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-25 21:39:36.514 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__adminEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Email] = @__adminEmail_0
2025-10-25 21:39:36.627 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__inspEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Email] = @__inspEmail_0
2025-10-25 21:39:36.649 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Inspectors] AS [i]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-25 21:39:36.670 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [EntitiesToInspect] AS [e]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-25 21:39:36.731 +03:00 [INF] Database seeded.
2025-10-25 21:39:37.145 +03:00 [INF] Now listening on: https://localhost:63886
2025-10-25 21:39:37.149 +03:00 [INF] Now listening on: http://localhost:63887
2025-10-25 21:39:37.239 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-25 21:39:37.244 +03:00 [INF] Hosting environment: Development
2025-10-25 21:39:37.246 +03:00 [INF] Content root path: C:\Users\Youssef Ghonem\Downloads\adreeTask\inspection-visits-backend\src\InspectionVisits.Api
2025-10-25 21:39:37.433 +03:00 [INF] Request starting HTTP/2 GET https://localhost:63886/ - null null
2025-10-25 21:39:37.651 +03:00 [INF] HTTP GET / responded 404 in 50.9305 ms
2025-10-25 21:39:37.665 +03:00 [INF] Request finished HTTP/2 GET https://localhost:63886/ - 404 0 null 240.8285ms
2025-10-25 21:39:37.682 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:63886/, Response status code: 404
2025-10-25 21:39:49.271 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/auth/login - null null
2025-10-25 21:39:49.298 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:39:49.306 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/auth/login - 204 null null 34.5537ms
2025-10-25 21:39:49.322 +03:00 [INF] Request starting HTTP/2 POST https://localhost:63886/api/auth/login - application/json 51
2025-10-25 21:39:49.340 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:39:49.345 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.AuthController.Login (InspectionVisits.Api)'
2025-10-25 21:39:49.374 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller InspectionVisits.Api.Controllers.AuthController (InspectionVisits.Api).
2025-10-25 21:39:49.490 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-10-25 21:39:49.743 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-10-25 21:39:49.809 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IList`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-25 21:39:49.844 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.AuthController.Login (InspectionVisits.Api) in 453.4236ms
2025-10-25 21:39:49.852 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.AuthController.Login (InspectionVisits.Api)'
2025-10-25 21:39:49.861 +03:00 [INF] HTTP POST /api/auth/login responded 200 in 517.8634 ms
2025-10-25 21:39:49.878 +03:00 [INF] Request finished HTTP/2 POST https://localhost:63886/api/auth/login - 200 null application/json; charset=utf-8 555.9054ms
2025-10-25 21:39:49.892 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/dashboard - null null
2025-10-25 21:39:49.902 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:39:49.906 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/dashboard - 204 null null 13.5469ms
2025-10-25 21:39:49.909 +03:00 [INF] Request starting HTTP/2 GET https://localhost:63886/api/dashboard - null null
2025-10-25 21:39:49.930 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:39:50.012 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.DashboardController.Get (InspectionVisits.Api)'
2025-10-25 21:39:50.023 +03:00 [INF] Route matched with {action = "Get", controller = "Dashboard"}. Executing controller action with signature System.Threading.Tasks.Task`1[InspectionVisits.Application.Features.Dashboard.Queries.DashboardVm] Get() on controller InspectionVisits.Api.Controllers.DashboardController (InspectionVisits.Api).
2025-10-25 21:39:50.254 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Status], COUNT(*)
FROM [InspectionVisits] AS [i]
GROUP BY [i].[Status]
2025-10-25 21:39:50.295 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__monthStart_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT AVG(CAST([i].[Score] AS float))
FROM [InspectionVisits] AS [i]
WHERE [i].[ScheduledAt] >= @__monthStart_0 AND [i].[Score] IS NOT NULL
2025-10-25 21:39:50.314 +03:00 [INF] Executing ObjectResult, writing value of type 'InspectionVisits.Application.Features.Dashboard.Queries.DashboardVm'.
2025-10-25 21:39:50.335 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.DashboardController.Get (InspectionVisits.Api) in 301.4337ms
2025-10-25 21:39:50.346 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.DashboardController.Get (InspectionVisits.Api)'
2025-10-25 21:39:50.352 +03:00 [INF] HTTP GET /api/dashboard responded 200 in 415.6546 ms
2025-10-25 21:39:50.362 +03:00 [INF] Request finished HTTP/2 GET https://localhost:63886/api/dashboard - 200 null application/json; charset=utf-8 453.1149ms
2025-10-25 21:39:51.654 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/entities - null null
2025-10-25 21:39:51.657 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/inspectors - null null
2025-10-25 21:39:51.657 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - null null
2025-10-25 21:39:51.683 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:39:51.687 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:39:51.691 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:39:51.695 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/entities - 204 null null 42.7915ms
2025-10-25 21:39:51.703 +03:00 [INF] Request starting HTTP/2 GET https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - null null
2025-10-25 21:39:51.698 +03:00 [INF] Request starting HTTP/2 GET https://localhost:63886/api/entities - null null
2025-10-25 21:39:51.697 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/inspectors - 204 null null 41.2932ms
2025-10-25 21:39:51.699 +03:00 [INF] Request starting HTTP/2 GET https://localhost:63886/api/inspectors - null null
2025-10-25 21:39:51.698 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - 204 null null 41.6709ms
2025-10-25 21:39:51.750 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:39:51.754 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:39:51.764 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:39:51.790 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.VisitsController.List (InspectionVisits.Api)'
2025-10-25 21:39:51.790 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.EntitiesController.List (InspectionVisits.Api)'
2025-10-25 21:39:51.791 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.InspectorsController.GetAll (InspectionVisits.Api)'
2025-10-25 21:39:51.804 +03:00 [INF] Route matched with {action = "List", controller = "Entities"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.List`1[InspectionVisits.Application.DTOs.EntityToInspectDto]] List(System.String) on controller InspectionVisits.Api.Controllers.EntitiesController (InspectionVisits.Api).
2025-10-25 21:39:51.805 +03:00 [INF] Route matched with {action = "GetAll", controller = "Inspectors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IReadOnlyList`1[InspectionVisits.Application.DTOs.InspectorDto]]] GetAll(System.Threading.CancellationToken) on controller InspectionVisits.Api.Controllers.InspectorsController (InspectionVisits.Api).
2025-10-25 21:39:51.807 +03:00 [INF] Route matched with {action = "List", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.List`1[InspectionVisits.Application.DTOs.InspectionVisitDto]] List(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[InspectionVisits.Domain.Enums.VisitStatus], System.Nullable`1[System.Int32], System.String) on controller InspectionVisits.Api.Controllers.VisitsController (InspectionVisits.Api).
2025-10-25 21:39:52.023 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Name], [e].[Address], [e].[Category]
FROM [EntitiesToInspect] AS [e]
2025-10-25 21:39:52.051 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[InspectionVisits.Application.DTOs.EntityToInspectDto, InspectionVisits.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-25 21:39:52.051 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[FullName], [i].[Email], [i].[Phone], [i].[Role]
FROM [Inspectors] AS [i]
ORDER BY [i].[FullName]
2025-10-25 21:39:52.067 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.EntitiesController.List (InspectionVisits.Api) in 248.6707ms
2025-10-25 21:39:52.068 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[InspectionVisits.Application.DTOs.InspectorDto, InspectionVisits.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-25 21:39:52.075 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.EntitiesController.List (InspectionVisits.Api)'
2025-10-25 21:39:52.082 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.InspectorsController.GetAll (InspectionVisits.Api) in 259.5299ms
2025-10-25 21:39:52.090 +03:00 [INF] HTTP GET /api/entities responded 200 in 302.1936 ms
2025-10-25 21:39:52.090 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[EntityToInspectId], [i].[InspectorId], [i].[ScheduledAt], [i].[Status], [i].[Score], [i].[Notes], [v].[Id], [v].[Code], [v].[Description], [v].[Severity]
FROM [InspectionVisits] AS [i]
LEFT JOIN [Violations] AS [v] ON [i].[Id] = [v].[InspectionVisitId]
ORDER BY [i].[Id]
2025-10-25 21:39:52.098 +03:00 [INF] Request finished HTTP/2 GET https://localhost:63886/api/entities - 200 null application/json; charset=utf-8 399.9405ms
2025-10-25 21:39:52.099 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.InspectorsController.GetAll (InspectionVisits.Api)'
2025-10-25 21:39:52.124 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[InspectionVisits.Application.DTOs.InspectionVisitDto, InspectionVisits.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-25 21:39:52.129 +03:00 [INF] HTTP GET /api/inspectors responded 200 in 339.6764 ms
2025-10-25 21:39:52.145 +03:00 [INF] Request finished HTTP/2 GET https://localhost:63886/api/inspectors - 200 null application/json; charset=utf-8 445.8448ms
2025-10-25 21:39:52.159 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.VisitsController.List (InspectionVisits.Api) in 334.3759ms
2025-10-25 21:39:52.165 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.VisitsController.List (InspectionVisits.Api)'
2025-10-25 21:39:52.170 +03:00 [INF] HTTP GET /api/visits responded 200 in 383.1730 ms
2025-10-25 21:39:52.178 +03:00 [INF] Request finished HTTP/2 GET https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - 200 null application/json; charset=utf-8 475.1599ms
2025-10-25 21:39:59.737 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/visits/schedule - null null
2025-10-25 21:39:59.749 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:39:59.752 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/visits/schedule - 204 null null 15.0206ms
2025-10-25 21:39:59.757 +03:00 [INF] Request starting HTTP/2 POST https://localhost:63886/api/visits/schedule - application/json 80
2025-10-25 21:39:59.768 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:39:59.772 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.VisitsController.Schedule (InspectionVisits.Api)'
2025-10-25 21:39:59.798 +03:00 [INF] Route matched with {action = "Schedule", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[InspectionVisits.Application.DTOs.InspectionVisitDto] Schedule(ScheduleVisitBody) on controller InspectionVisits.Api.Controllers.VisitsController (InspectionVisits.Api).
2025-10-25 21:39:59.884 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__req_EntityToInspectId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [EntitiesToInspect] AS [e]
        WHERE [e].[Id] = @__req_EntityToInspectId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-25 21:39:59.906 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__req_InspectorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Inspectors] AS [i]
        WHERE [i].[Id] = @__req_InspectorId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-25 21:40:00.126 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 2000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [InspectionVisits] ([CreatedAt], [EntityToInspectId], [InspectorId], [Notes], [ScheduledAt], [Score], [Status], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-10-25 21:40:00.198 +03:00 [INF] Executing ObjectResult, writing value of type 'InspectionVisits.Application.DTOs.InspectionVisitDto'.
2025-10-25 21:40:00.204 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.VisitsController.Schedule (InspectionVisits.Api) in 392.8485ms
2025-10-25 21:40:00.210 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.VisitsController.Schedule (InspectionVisits.Api)'
2025-10-25 21:40:00.214 +03:00 [INF] HTTP POST /api/visits/schedule responded 200 in 442.9085 ms
2025-10-25 21:40:00.220 +03:00 [INF] Request finished HTTP/2 POST https://localhost:63886/api/visits/schedule - 200 null application/json; charset=utf-8 462.7139ms
2025-10-25 21:40:00.226 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - null null
2025-10-25 21:40:00.246 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:40:00.249 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - 204 null null 23.6462ms
2025-10-25 21:40:00.253 +03:00 [INF] Request starting HTTP/2 GET https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - null null
2025-10-25 21:40:00.271 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:40:00.278 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.VisitsController.List (InspectionVisits.Api)'
2025-10-25 21:40:00.283 +03:00 [INF] Route matched with {action = "List", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.List`1[InspectionVisits.Application.DTOs.InspectionVisitDto]] List(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[InspectionVisits.Domain.Enums.VisitStatus], System.Nullable`1[System.Int32], System.String) on controller InspectionVisits.Api.Controllers.VisitsController (InspectionVisits.Api).
2025-10-25 21:40:00.303 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[EntityToInspectId], [i].[InspectorId], [i].[ScheduledAt], [i].[Status], [i].[Score], [i].[Notes], [v].[Id], [v].[Code], [v].[Description], [v].[Severity]
FROM [InspectionVisits] AS [i]
LEFT JOIN [Violations] AS [v] ON [i].[Id] = [v].[InspectionVisitId]
ORDER BY [i].[Id]
2025-10-25 21:40:00.312 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[InspectionVisits.Application.DTOs.InspectionVisitDto, InspectionVisits.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-25 21:40:00.318 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.VisitsController.List (InspectionVisits.Api) in 26.2289ms
2025-10-25 21:40:00.322 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.VisitsController.List (InspectionVisits.Api)'
2025-10-25 21:40:00.326 +03:00 [INF] HTTP GET /api/visits responded 200 in 48.4610 ms
2025-10-25 21:40:00.336 +03:00 [INF] Request finished HTTP/2 GET https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - 200 null application/json; charset=utf-8 83.1679ms
2025-10-25 21:40:06.512 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/visits/2/violations - null null
2025-10-25 21:40:06.527 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:40:06.530 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/visits/2/violations - 204 null null 18.2992ms
2025-10-25 21:40:06.533 +03:00 [INF] Request starting HTTP/2 POST https://localhost:63886/api/visits/2/violations - application/json 45
2025-10-25 21:40:06.555 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:40:06.560 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.VisitsController.AddViolation (InspectionVisits.Api)'
2025-10-25 21:40:06.569 +03:00 [INF] Route matched with {action = "AddViolation", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[InspectionVisits.Application.DTOs.ViolationDto] AddViolation(Int32, AddViolationBody) on controller InspectionVisits.Api.Controllers.VisitsController (InspectionVisits.Api).
2025-10-25 21:40:10.141 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__req_VisitId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreatedAt], [i].[EntityToInspectId], [i].[InspectorId], [i].[Notes], [i].[ScheduledAt], [i].[Score], [i].[Status], [i].[UpdatedAt]
FROM [InspectionVisits] AS [i]
WHERE [i].[Id] = @__req_VisitId_0
2025-10-25 21:40:10.207 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.VisitsController.AddViolation (InspectionVisits.Api) in 3630.0192ms
2025-10-25 21:40:10.222 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.VisitsController.AddViolation (InspectionVisits.Api)'
2025-10-25 21:40:10.240 +03:00 [ERR] HTTP POST /api/visits/2/violations responded 500 in 3679.7609 ms
System.InvalidOperationException: VIOLATIONS_ALLOWED_ONLY_AFTER_COMPLETION
   at InspectionVisits.Application.Features.Visits.Commands.AddViolationHandler.Handle(AddViolation req, CancellationToken ct) in C:\Users\Youssef Ghonem\Downloads\adreeTask\inspection-visits-backend\src\InspectionVisits.Application\Features\Visits\Commands\AddViolation.cs:line 37
   at InspectionVisits.Application.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Youssef Ghonem\Downloads\adreeTask\inspection-visits-backend\src\InspectionVisits.Application\Common\Behaviors\ValidationBehavior.cs:line 24
   at lambda_method395(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-10-25 21:40:10.318 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: VIOLATIONS_ALLOWED_ONLY_AFTER_COMPLETION
   at InspectionVisits.Application.Features.Visits.Commands.AddViolationHandler.Handle(AddViolation req, CancellationToken ct) in C:\Users\Youssef Ghonem\Downloads\adreeTask\inspection-visits-backend\src\InspectionVisits.Application\Features\Visits\Commands\AddViolation.cs:line 37
   at InspectionVisits.Application.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Youssef Ghonem\Downloads\adreeTask\inspection-visits-backend\src\InspectionVisits.Application\Common\Behaviors\ValidationBehavior.cs:line 24
   at lambda_method395(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-25 21:40:10.354 +03:00 [INF] Executing endpoint '/error'
2025-10-25 21:40:10.376 +03:00 [INF] Setting HTTP status code 400.
2025-10-25 21:40:10.408 +03:00 [INF] Executed endpoint '/error'
2025-10-25 21:40:10.414 +03:00 [INF] HTTP POST /error responded 400 in 59.9254 ms
2025-10-25 21:40:10.421 +03:00 [INF] Request finished HTTP/2 POST https://localhost:63886/api/visits/2/violations - 400 null application/problem+json 3888.7586ms
2025-10-25 21:40:25.745 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/visits/2/violations - null null
2025-10-25 21:40:25.781 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:40:25.785 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/visits/2/violations - 204 null null 40.7266ms
2025-10-25 21:40:25.788 +03:00 [INF] Request starting HTTP/2 POST https://localhost:63886/api/visits/2/violations - application/json 57
2025-10-25 21:40:25.815 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:40:25.819 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.VisitsController.AddViolation (InspectionVisits.Api)'
2025-10-25 21:40:25.823 +03:00 [INF] Route matched with {action = "AddViolation", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[InspectionVisits.Application.DTOs.ViolationDto] AddViolation(Int32, AddViolationBody) on controller InspectionVisits.Api.Controllers.VisitsController (InspectionVisits.Api).
2025-10-25 21:40:25.838 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__req_VisitId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[CreatedAt], [i].[EntityToInspectId], [i].[InspectorId], [i].[Notes], [i].[ScheduledAt], [i].[Score], [i].[Status], [i].[UpdatedAt]
FROM [InspectionVisits] AS [i]
WHERE [i].[Id] = @__req_VisitId_0
2025-10-25 21:40:25.934 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.VisitsController.AddViolation (InspectionVisits.Api) in 102.9204ms
2025-10-25 21:40:25.939 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.VisitsController.AddViolation (InspectionVisits.Api)'
2025-10-25 21:40:25.943 +03:00 [ERR] HTTP POST /api/visits/2/violations responded 500 in 124.1855 ms
System.InvalidOperationException: VIOLATIONS_ALLOWED_ONLY_AFTER_COMPLETION
   at InspectionVisits.Application.Features.Visits.Commands.AddViolationHandler.Handle(AddViolation req, CancellationToken ct) in C:\Users\Youssef Ghonem\Downloads\adreeTask\inspection-visits-backend\src\InspectionVisits.Application\Features\Visits\Commands\AddViolation.cs:line 37
   at InspectionVisits.Application.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Youssef Ghonem\Downloads\adreeTask\inspection-visits-backend\src\InspectionVisits.Application\Common\Behaviors\ValidationBehavior.cs:line 24
   at lambda_method395(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-10-25 21:40:25.971 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: VIOLATIONS_ALLOWED_ONLY_AFTER_COMPLETION
   at InspectionVisits.Application.Features.Visits.Commands.AddViolationHandler.Handle(AddViolation req, CancellationToken ct) in C:\Users\Youssef Ghonem\Downloads\adreeTask\inspection-visits-backend\src\InspectionVisits.Application\Features\Visits\Commands\AddViolation.cs:line 37
   at InspectionVisits.Application.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Youssef Ghonem\Downloads\adreeTask\inspection-visits-backend\src\InspectionVisits.Application\Common\Behaviors\ValidationBehavior.cs:line 24
   at lambda_method395(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-25 21:40:25.989 +03:00 [INF] Executing endpoint '/error'
2025-10-25 21:40:25.993 +03:00 [INF] Setting HTTP status code 400.
2025-10-25 21:40:25.997 +03:00 [INF] Executed endpoint '/error'
2025-10-25 21:40:26.000 +03:00 [INF] HTTP POST /error responded 400 in 11.9300 ms
2025-10-25 21:40:26.009 +03:00 [INF] Request finished HTTP/2 POST https://localhost:63886/api/visits/2/violations - 400 null application/problem+json 220.7897ms
2025-10-25 21:41:40.757 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/visits/schedule - null null
2025-10-25 21:41:40.776 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:41:40.780 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/visits/schedule - 204 null null 22.061ms
2025-10-25 21:41:40.783 +03:00 [INF] Request starting HTTP/2 POST https://localhost:63886/api/visits/schedule - application/json 80
2025-10-25 21:41:40.806 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:41:40.819 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.VisitsController.Schedule (InspectionVisits.Api)'
2025-10-25 21:41:40.828 +03:00 [INF] Route matched with {action = "Schedule", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[InspectionVisits.Application.DTOs.InspectionVisitDto] Schedule(ScheduleVisitBody) on controller InspectionVisits.Api.Controllers.VisitsController (InspectionVisits.Api).
2025-10-25 21:41:40.912 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.VisitsController.Schedule (InspectionVisits.Api) in 73.3333ms
2025-10-25 21:41:40.919 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.VisitsController.Schedule (InspectionVisits.Api)'
2025-10-25 21:41:40.924 +03:00 [ERR] HTTP POST /api/visits/schedule responded 500 in 105.7824 ms
FluentValidation.ValidationException: Validation failed: 
 -- ScheduledAt: 'Scheduled At' must be greater than '10/25/2025 6:40:40 PM'. Severity: Error
   at InspectionVisits.Application.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Youssef Ghonem\Downloads\adreeTask\inspection-visits-backend\src\InspectionVisits.Application\Common\Behaviors\ValidationBehavior.cs:line 21
   at lambda_method261(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-10-25 21:41:40.949 +03:00 [ERR] An unhandled exception has occurred while executing the request.
FluentValidation.ValidationException: Validation failed: 
 -- ScheduledAt: 'Scheduled At' must be greater than '10/25/2025 6:40:40 PM'. Severity: Error
   at InspectionVisits.Application.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Youssef Ghonem\Downloads\adreeTask\inspection-visits-backend\src\InspectionVisits.Application\Common\Behaviors\ValidationBehavior.cs:line 21
   at lambda_method261(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-25 21:41:40.977 +03:00 [INF] Executing endpoint '/error'
2025-10-25 21:41:40.984 +03:00 [INF] Setting HTTP status code 400.
2025-10-25 21:41:40.997 +03:00 [INF] Executed endpoint '/error'
2025-10-25 21:41:41.013 +03:00 [INF] HTTP POST /error responded 400 in 36.2316 ms
2025-10-25 21:41:41.026 +03:00 [INF] Request finished HTTP/2 POST https://localhost:63886/api/visits/schedule - 400 null application/problem+json 243.484ms
2025-10-25 21:44:08.633 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/entities - null null
2025-10-25 21:44:08.639 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - null null
2025-10-25 21:44:08.633 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/inspectors - null null
2025-10-25 21:44:08.660 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:44:08.664 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:44:08.667 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:44:08.689 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - 204 null null 49.6747ms
2025-10-25 21:44:08.691 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/inspectors - 204 null null 57.8583ms
2025-10-25 21:44:08.676 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/entities - 204 null null 43.4111ms
2025-10-25 21:44:08.715 +03:00 [INF] Request starting HTTP/2 GET https://localhost:63886/api/inspectors - null null
2025-10-25 21:44:08.689 +03:00 [INF] Request starting HTTP/2 GET https://localhost:63886/api/entities - null null
2025-10-25 21:44:08.707 +03:00 [INF] Request starting HTTP/2 GET https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - null null
2025-10-25 21:44:08.769 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:44:08.776 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:44:08.782 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:44:08.791 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.InspectorsController.GetAll (InspectionVisits.Api)'
2025-10-25 21:44:08.794 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.EntitiesController.List (InspectionVisits.Api)'
2025-10-25 21:44:08.796 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.VisitsController.List (InspectionVisits.Api)'
2025-10-25 21:44:08.807 +03:00 [INF] Route matched with {action = "GetAll", controller = "Inspectors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IReadOnlyList`1[InspectionVisits.Application.DTOs.InspectorDto]]] GetAll(System.Threading.CancellationToken) on controller InspectionVisits.Api.Controllers.InspectorsController (InspectionVisits.Api).
2025-10-25 21:44:08.810 +03:00 [INF] Route matched with {action = "List", controller = "Entities"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.List`1[InspectionVisits.Application.DTOs.EntityToInspectDto]] List(System.String) on controller InspectionVisits.Api.Controllers.EntitiesController (InspectionVisits.Api).
2025-10-25 21:44:08.812 +03:00 [INF] Route matched with {action = "List", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[System.Collections.Generic.List`1[InspectionVisits.Application.DTOs.InspectionVisitDto]] List(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Nullable`1[InspectionVisits.Domain.Enums.VisitStatus], System.Nullable`1[System.Int32], System.String) on controller InspectionVisits.Api.Controllers.VisitsController (InspectionVisits.Api).
2025-10-25 21:44:08.844 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Name], [e].[Address], [e].[Category]
FROM [EntitiesToInspect] AS [e]
2025-10-25 21:44:08.845 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[FullName], [i].[Email], [i].[Phone], [i].[Role]
FROM [Inspectors] AS [i]
ORDER BY [i].[FullName]
2025-10-25 21:44:08.863 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[InspectionVisits.Application.DTOs.EntityToInspectDto, InspectionVisits.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-25 21:44:08.872 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[InspectionVisits.Application.DTOs.InspectorDto, InspectionVisits.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-25 21:44:08.873 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[EntityToInspectId], [i].[InspectorId], [i].[ScheduledAt], [i].[Status], [i].[Score], [i].[Notes], [v].[Id], [v].[Code], [v].[Description], [v].[Severity]
FROM [InspectionVisits] AS [i]
LEFT JOIN [Violations] AS [v] ON [i].[Id] = [v].[InspectionVisitId]
ORDER BY [i].[Id]
2025-10-25 21:44:08.888 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.EntitiesController.List (InspectionVisits.Api) in 57.5153ms
2025-10-25 21:44:08.890 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.InspectorsController.GetAll (InspectionVisits.Api) in 62.9528ms
2025-10-25 21:44:08.896 +03:00 [INF] Executing ObjectResult, writing value of type 'System.Collections.Generic.List`1[[InspectionVisits.Application.DTOs.InspectionVisitDto, InspectionVisits.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-25 21:44:08.908 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.EntitiesController.List (InspectionVisits.Api)'
2025-10-25 21:44:08.911 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.InspectorsController.GetAll (InspectionVisits.Api)'
2025-10-25 21:44:08.915 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.VisitsController.List (InspectionVisits.Api) in 77.8794ms
2025-10-25 21:44:08.924 +03:00 [INF] HTTP GET /api/entities responded 200 in 130.4397 ms
2025-10-25 21:44:08.926 +03:00 [INF] HTTP GET /api/inspectors responded 200 in 135.1165 ms
2025-10-25 21:44:08.930 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.VisitsController.List (InspectionVisits.Api)'
2025-10-25 21:44:08.947 +03:00 [INF] Request finished HTTP/2 GET https://localhost:63886/api/entities - 200 null application/json; charset=utf-8 258.2307ms
2025-10-25 21:44:08.950 +03:00 [INF] Request finished HTTP/2 GET https://localhost:63886/api/inspectors - 200 null application/json; charset=utf-8 235.8448ms
2025-10-25 21:44:08.953 +03:00 [INF] HTTP GET /api/visits responded 200 in 157.6821 ms
2025-10-25 21:44:08.996 +03:00 [INF] Request finished HTTP/2 GET https://localhost:63886/api/visits?pageIndex=0&pageSize=10 - 200 null application/json; charset=utf-8 289.0617ms
2025-10-25 21:44:31.024 +03:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:63886/api/visits/schedule - null null
2025-10-25 21:44:31.043 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:44:31.047 +03:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:63886/api/visits/schedule - 204 null null 23.1464ms
2025-10-25 21:44:31.051 +03:00 [INF] Request starting HTTP/2 POST https://localhost:63886/api/visits/schedule - application/json 80
2025-10-25 21:44:31.089 +03:00 [INF] CORS policy execution successful.
2025-10-25 21:44:31.094 +03:00 [INF] Executing endpoint 'InspectionVisits.Api.Controllers.VisitsController.Schedule (InspectionVisits.Api)'
2025-10-25 21:44:31.100 +03:00 [INF] Route matched with {action = "Schedule", controller = "Visits"}. Executing controller action with signature System.Threading.Tasks.Task`1[InspectionVisits.Application.DTOs.InspectionVisitDto] Schedule(ScheduleVisitBody) on controller InspectionVisits.Api.Controllers.VisitsController (InspectionVisits.Api).
2025-10-25 21:44:31.185 +03:00 [INF] Executed action InspectionVisits.Api.Controllers.VisitsController.Schedule (InspectionVisits.Api) in 78.6703ms
2025-10-25 21:44:31.192 +03:00 [INF] Executed endpoint 'InspectionVisits.Api.Controllers.VisitsController.Schedule (InspectionVisits.Api)'
2025-10-25 21:44:31.199 +03:00 [ERR] HTTP POST /api/visits/schedule responded 500 in 105.1643 ms
FluentValidation.ValidationException: Validation failed: 
 -- ScheduledAt: 'Scheduled At' must be greater than '10/25/2025 6:43:31 PM'. Severity: Error
   at InspectionVisits.Application.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Youssef Ghonem\Downloads\adreeTask\inspection-visits-backend\src\InspectionVisits.Application\Common\Behaviors\ValidationBehavior.cs:line 21
   at lambda_method261(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-10-25 21:44:31.223 +03:00 [ERR] An unhandled exception has occurred while executing the request.
FluentValidation.ValidationException: Validation failed: 
 -- ScheduledAt: 'Scheduled At' must be greater than '10/25/2025 6:43:31 PM'. Severity: Error
   at InspectionVisits.Application.Common.Behaviors.ValidationBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in C:\Users\Youssef Ghonem\Downloads\adreeTask\inspection-visits-backend\src\InspectionVisits.Application\Common\Behaviors\ValidationBehavior.cs:line 21
   at lambda_method261(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-10-25 21:44:31.265 +03:00 [INF] Executing endpoint '/error'
2025-10-25 21:44:31.275 +03:00 [INF] Setting HTTP status code 400.
2025-10-25 21:44:31.285 +03:00 [INF] Executed endpoint '/error'
2025-10-25 21:44:31.292 +03:00 [INF] HTTP POST /error responded 400 in 27.4308 ms
2025-10-25 21:44:31.298 +03:00 [INF] Request finished HTTP/2 POST https://localhost:63886/api/visits/schedule - 400 null application/problem+json 247.1825ms
